(function(f){var g=false;var k;var i=0;var j=-47;var c=40;var e=0;function b(){return"getGamepads" in navigator}var h=function(l){if(h.done){return}location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&zoom="+l;console.log("zommmmm:",l);h.done=true;console.log("Reset_Zoom")};var a=function(){if(a.done){return}location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&continuouspantiltmove=0,0";i=0;a.done=true;console.log("Reset")};function d(){var m=navigator.getGamepads()[0];var q="";q+="id: "+m.id+"<br/>";var n=5;var x=4;var p=3;var r=2;var t=1;var u=0;var w=0.01;var l=20;var v=0.4;var s=1000;if(m.buttons[x].pressed){location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&move=home&speed=100";i=0;j=-47;c=40;e=0;console.log("home")}if(m.buttons[n].pressed){location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&zoom=40&imagerotation=0";i=0;j=-47;c=40;e=0;console.log("zoom home")}var o=0;q+="Stick "+(Math.ceil(o/2)+1)+": "+m.axes[o]+","+m.axes[o+1]+"<br/>";if((Math.ceil(o/2)+1)===1){if(Math.abs(m.axes[o])>w){i=m.axes[o]*l/2;if(i>=180){i=180}if(i<=-180){i=-180}if(m.axes[o+1]<-w&&m.axes[o]<-w){e=0;console.log("Diagonal superior izquierdo");e=Math.abs(m.axes[o])*l}else{if(m.axes[o]>0&&m.axes[o+1]<-0){e=0;console.log("Diagonal superior derecho");e=Math.abs(m.axes[o])*l}else{if(m.axes[o]<-w&&m.axes[o+1]>w){e=0;console.log("Diagonal inferior izquierdo");e=-Math.abs(m.axes[o]+1)*l}else{if(m.axes[o]>w&&m.axes[o+1]>w){e=0;console.log("Diagonal inferior derecho");e=-Math.abs(m.axes[o+1])*l}else{e=0}}}}location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&continuouspantiltmove="+i+","+e;a.done=false}else{if(m.axes[o]===0&&m.axes[o+1]<=-w){e=Math.abs(m.axes[o+1])*l;location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&continuouspantiltmove=0,"+e;a.done=false}else{if(m.axes[o]===0&&m.axes[o+1]>=w){e=-Math.abs(m.axes[o+1])*l;location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&continuouspantiltmove=0,"+e;a.done=false}}}if(m.axes[o]===0&&m.axes[o+1]===0){a()}o=2;q+="Stick "+(Math.ceil(o/2)+1)+": "+m.axes[o]+"<br/>";if((Math.ceil(o/2)+1)===2){if(m.axes[o]>v){console.log("Zoom ");location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&zoom=10900";c=c+m.axes[o]*150;if(c>=10900){c=10900}h.done=false}else{if(m.axes[o]<-v){console.log("Zoom out");location.href="http://192.168.1.155/axis-cgi/com/ptz.cgi?camera=1&zoom=40";c=c-(Math.abs(m.axes[o])*500);if(c<=40){c=40}h.done=false}else{h(c)}}}}f("#gamepadDisplay").html(q)}f(document).ready(function(){if(b()){var l="To begin using your gamepad, connect it and press any button!";f("#gamepadPrompt").text(l);f(window).on("gamepadconnected",function(){g=true;f("#gamepadPrompt").html("Gamepad connected!");console.log("connection event");k=window.setInterval(d,100)});f(window).on("gamepaddisconnected",function(){console.log("disconnection event");f("#gamepadPrompt").text(l);window.clearInterval(k)});var m=window.setInterval(function(){console.log("checkGP");if(navigator.getGamepads()[0]){if(!g){f(window).trigger("gamepadconnected")}window.clearInterval(m)}},500)}})}(jQuery));